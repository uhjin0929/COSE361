---
tags:
  - 2계층
  - MAC어드레
---
- 로컬 에리어 네트워크 : 줄여서 로컬
	- 이더넷, VLANs

## Introduction

- Link Layer(2계층)은 통신할 때 관여하는 범위가 물리적으로 연결되어있는 노드(호스트/라우터)까지이다
- Transport는 출발지부터 목적지(논리적으로 1:1연결된 호스트-호스트)까지 데이터가 이동하는 과정 관여
- Link는 **물리적으로 연결되어있는 인접한** 노드(호스트/라우터)사이에서 관여
- 호스트-라우터까지를 로컬이라고 함. 이 구간에서 Link계층이 관여
- Link(2계층)에에서는 패킷을 **프레임**이라고 함, 하지만 **패킷**으로 통일할 것이다!
- Link layer의 주요한 기능 몇 가지
	- **flow control(흐름 제어)** : 보내는 쪽에서 데이터를 n개 보내면 받는 쪽에서도 n개 받을 준비를 하기
	- error detection : 다
	- error connection : 이진수로 
	- duplex (개념정도만)
		- full duplex :  데이터를 보내고 받는 것을 동시에 할 수 있는 것 
		- half duplex:  무전기와 같다. 한번에 데이터를 한 방향으로 밖에 전송 못함 (내가 누르면 저쪽이 말못해)
- Link layer는 랜카드(NIC)에서 수행됨


## Multiple access link, protocols
- 링크의 두 종류
	- point-to-point : 이더넷 스위치와 호스트 사이에 point-to-point link 
	- 2계층에서 브로드캐스트라고 하면...
		- MAC주소가 16진수로 되어있는데
		- 브로드캐스트 주소가 FFFFFFF... (IP의 경우 255.255.255.255)
		- 802.11 wireless가 표준, 4G/5G, 위성도 있고..
- 이더넷 : 라우터를 넘어가기 전까지의 브로드캐스트 도메인
- Multiple access protocols
	- 노드가 어떻게 채널을 공유하고, 언제 노드가 전송될지 결정하는 분배 알고리즘
	- 노드가 동시다발적으로 전송을 하면 충돌/간섭이 일어나니까..
	- random access MAC protocol
		- 어떻게 충돌을 감지하나
		- 어떻게 충돌에서 회복하나 (오류 복구의 핵심은 다시 전송하는 거임)
		- CSMA, CSMA/CD(우선에서 충돌을 탐지하기 위한 통신과정), CSMA/CA(옆에꺼의 무선버전) 등 있음..
		- CSMA/CD (강의록 20p)
			- 이더넷의 매체 접근 방식으로 둘 이상의 호스트가 채널이 유휴(논다고) 라고 판단
			- 전송 과정에서 충돌이 발생
			- 충돌 감지 기능이 필수적으로 요구
			- 충돌이 감지되면 진행중인 프레임의 전송을 중단
		- CSMA/CA (무선환경에서의 충돌, 강의록 23p)
			- Carrier Sense ; 통신을 하기 전에 듣는 단계(탐색)
			- Multiple Maccess : Data 흐름 감지
			- 충돌 회피 : 데이터흐름이 없으면 예비 신호를 통해 충돌 회피

## Addressing, ARP
- IP 주소는 32비트 체계고 A,B,C 3클래스 classful, 라우터 넘어갈 때 쓴다
- **MAC(or LAN or 물리적 or 이더넷) 주소** : 물리적으로 연결된 (같은 아이피 서브넷인) 애들끼리 통신할 떄 쓴다
- ARP(address resolution protocol)
	- TTL
- 패킷 헤더의 src/sest 맥주소는 라우터 지날 때마다 바뀜

## 이더넷

- 버스, 스위치가 사용됨
- 이더넷 프레임 : 2계층의 헤더에 들어가는 정보 (src/dest 맥주소 등..)
- 이더넷 스위치 : 2계층의 디바이스
	- star형 토폴로지, 중앙에 스위치 하나에 PC 여러대 연결
		- 싸고, 구축하기도 쉽다.
		- 스위치가 죽으면 네트워크가 다 죽어버린 다는게 최대의 단점
	- 스위치 안에 MAC 테이블이 있어서 패킷을 어디로 보낼지(스위칭하는) 안다
	- 스위치 환경 안에서는 충돌(collison)이 없다
	- 스위치는 스스로 learn을 한다
		- 케이블을 딱 꽂고 몇초 지나면 연결되어있는 PC의 MAC주소를 스위치가 스스로 다 수집함
	- 스위치 vs 라우터 (강의록 p64)
		- 공) 둘다 패킷을 전송하는 장비, 포워딩 테이블 가지고 있음
		- 라우터 : Network(3계층) 디바이스 : ip 정보 처리
		- 스위치 : Link(2계층) 디바이스 : MAC주소 처

## VLANs

- 서버와 일반PC 간에는 네트워크를 분리해야 한다는 원칙이 있으나.. 같은 (라우터하위)로컬 네트워크에 속한다면?
- 물리적으로는 하나의 로컬 LAN이지만 그 **로컬 LAN 안에서 가상으로 네트워크를 쪼개는 것**이 **VLAN**
- 스위치의 포트들을 포트별로 VLAN을 정해서 (몇번부터 몇번은 A , 몇번부터 몇번은 B VLAN) 나눔. : Port-based


